{"ast":null,"code":"import _toConsumableArray from\"/Users/Me/Desktop/ReactProjects/ecomm/luxeshop/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/Me/Desktop/ReactProjects/ecomm/luxeshop/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{Link}from'react-router-dom';import{useSelector,useDispatch}from'react-redux';import{detailsProduct,saveProductReview}from'../actions/productActions';import Rating from'../components/Rating';import{PRODUCT_REVIEW_SAVE_RESET}from'../constants/productConstants';function ProductScreen(props){var _useState=useState(1),_useState2=_slicedToArray(_useState,2),qty=_useState2[0],setQty=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),rating=_useState4[0],setRating=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),comment=_useState6[0],setComment=_useState6[1];var userSignin=useSelector(function(state){return state.userSignin;});var userInfo=userSignin.userInfo;var productDetails=useSelector(function(state){return state.productDetails;});var product=productDetails.product,loading=productDetails.loading,error=productDetails.error;var productReviewSave=useSelector(function(state){return state.productReviewSave;});var productSaveSuccess=productReviewSave.success;var dispatch=useDispatch();useEffect(function(){if(productSaveSuccess){alert('Review submitted successfully.');setRating(0);setComment('');dispatch({type:PRODUCT_REVIEW_SAVE_RESET});}dispatch(detailsProduct(props.match.params.id));return function(){//\n};},[productSaveSuccess]);var submitHandler=function submitHandler(e){e.preventDefault();// dispatch actions\ndispatch(saveProductReview(props.match.params.id,{name:userInfo.name,rating:rating,comment:comment}));};var handleAddToCart=function handleAddToCart(){props.history.push('/cart/'+props.match.params.id+'?qty='+qty);};return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"back-to-result\"},/*#__PURE__*/React.createElement(Link,{to:\"/\"},\"Back to result\")),loading?/*#__PURE__*/React.createElement(\"div\",null,\"Loading...\"):error?/*#__PURE__*/React.createElement(\"div\",null,error,\" \"):/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"details\"},/*#__PURE__*/React.createElement(\"div\",{className:\"details-image\"},/*#__PURE__*/React.createElement(\"img\",{src:product.image,alt:\"product\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"details-info\"},/*#__PURE__*/React.createElement(\"ul\",null,/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"h4\",null,product.name)),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"a\",{href:\"#reviews\"},/*#__PURE__*/React.createElement(Rating,{value:product.rating,text:product.numReviews+' reviews'}))),/*#__PURE__*/React.createElement(\"li\",null,\"Price: \",/*#__PURE__*/React.createElement(\"b\",null,\"$\",product.price)),/*#__PURE__*/React.createElement(\"li\",null,\"Description:\",/*#__PURE__*/React.createElement(\"div\",null,product.description)))),/*#__PURE__*/React.createElement(\"div\",{className:\"details-action\"},/*#__PURE__*/React.createElement(\"ul\",null,/*#__PURE__*/React.createElement(\"li\",null,\"Price: \",product.price),/*#__PURE__*/React.createElement(\"li\",null,\"Status:\",' ',product.countInStock>0?'In Stock':'Unavailable.'),/*#__PURE__*/React.createElement(\"li\",null,\"Qty:\",' ',/*#__PURE__*/React.createElement(\"select\",{value:qty,onChange:function onChange(e){setQty(e.target.value);}},_toConsumableArray(Array(product.countInStock).keys()).map(function(x){return/*#__PURE__*/React.createElement(\"option\",{key:x+1,value:x+1},x+1);}))),/*#__PURE__*/React.createElement(\"li\",null,product.countInStock>0&&/*#__PURE__*/React.createElement(\"button\",{onClick:handleAddToCart,className:\"button primary\"},\"Add to Cart\"))))),/*#__PURE__*/React.createElement(\"div\",{className:\"content-margined\"},/*#__PURE__*/React.createElement(\"h2\",null,\"Reviews\"),!product.reviews.length&&/*#__PURE__*/React.createElement(\"div\",null,\"There is no review\"),/*#__PURE__*/React.createElement(\"ul\",{className:\"review\",id:\"reviews\"},product.reviews.map(function(review){return/*#__PURE__*/React.createElement(\"li\",{key:review._id},/*#__PURE__*/React.createElement(\"div\",null,review.name),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Rating,{value:review.rating})),/*#__PURE__*/React.createElement(\"div\",null,review.createdAt.substring(0,10)),/*#__PURE__*/React.createElement(\"div\",null,review.comment));}),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"h3\",null,\"Write a customer review\"),userInfo?/*#__PURE__*/React.createElement(\"form\",{onSubmit:submitHandler},/*#__PURE__*/React.createElement(\"ul\",{className:\"form-container\"},/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"rating\"},\"Rating\"),/*#__PURE__*/React.createElement(\"select\",{name:\"rating\",id:\"rating\",value:rating,onChange:function onChange(e){return setRating(e.target.value);}},/*#__PURE__*/React.createElement(\"option\",{value:\"1\"},\"1- Poor\"),/*#__PURE__*/React.createElement(\"option\",{value:\"2\"},\"2- Fair\"),/*#__PURE__*/React.createElement(\"option\",{value:\"3\"},\"3- Good\"),/*#__PURE__*/React.createElement(\"option\",{value:\"4\"},\"4- Very Good\"),/*#__PURE__*/React.createElement(\"option\",{value:\"5\"},\"5- Excelent\"))),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"comment\"},\"Comment\"),/*#__PURE__*/React.createElement(\"textarea\",{name:\"comment\",value:comment,onChange:function onChange(e){return setComment(e.target.value);}})),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"button primary\"},\"Submit\")))):/*#__PURE__*/React.createElement(\"div\",null,\"Please \",/*#__PURE__*/React.createElement(Link,{to:\"/signin\"},\"Sign-in\"),\" to write a review.\"))))));}export default ProductScreen;","map":{"version":3,"sources":["/Users/Me/Desktop/ReactProjects/ecomm/luxeshop/frontend/src/screens/ProductScreen.js"],"names":["React","useEffect","useState","Link","useSelector","useDispatch","detailsProduct","saveProductReview","Rating","PRODUCT_REVIEW_SAVE_RESET","ProductScreen","props","qty","setQty","rating","setRating","comment","setComment","userSignin","state","userInfo","productDetails","product","loading","error","productReviewSave","productSaveSuccess","success","dispatch","alert","type","match","params","id","submitHandler","e","preventDefault","name","handleAddToCart","history","push","image","numReviews","price","description","countInStock","target","value","Array","keys","map","x","reviews","length","review","_id","createdAt","substring"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { detailsProduct, saveProductReview } from '../actions/productActions';\nimport Rating from '../components/Rating';\nimport { PRODUCT_REVIEW_SAVE_RESET } from '../constants/productConstants';\n\nfunction ProductScreen(props) {\n  const [qty, setQty] = useState(1);\n  const [rating, setRating] = useState(0);\n  const [comment, setComment] = useState('');\n  const userSignin = useSelector((state) => state.userSignin);\n  const { userInfo } = userSignin;\n  const productDetails = useSelector((state) => state.productDetails);\n  const { product, loading, error } = productDetails;\n  const productReviewSave = useSelector((state) => state.productReviewSave);\n  const { success: productSaveSuccess } = productReviewSave;\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    if (productSaveSuccess) {\n      alert('Review submitted successfully.');\n      setRating(0);\n      setComment('');\n      dispatch({ type: PRODUCT_REVIEW_SAVE_RESET });\n    }\n    dispatch(detailsProduct(props.match.params.id));\n    return () => {\n      //\n    };\n  }, [productSaveSuccess]);\n  const submitHandler = (e) => {\n    e.preventDefault();\n    // dispatch actions\n    dispatch(\n      saveProductReview(props.match.params.id, {\n        name: userInfo.name,\n        rating: rating,\n        comment: comment,\n      })\n    );\n  };\n  const handleAddToCart = () => {\n    props.history.push('/cart/' + props.match.params.id + '?qty=' + qty);\n  };\n\n  return (\n    <div>\n      <div className=\"back-to-result\">\n        <Link to=\"/\">Back to result</Link>\n      </div>\n      {loading ? (\n        <div>Loading...</div>\n      ) : error ? (\n        <div>{error} </div>\n      ) : (\n        <>\n          <div className=\"details\">\n            <div className=\"details-image\">\n              <img src={product.image} alt=\"product\"></img>\n            </div>\n            <div className=\"details-info\">\n              <ul>\n                <li>\n                  <h4>{product.name}</h4>\n                </li>\n                <li>\n                  <a href=\"#reviews\">\n                    <Rating\n                      value={product.rating}\n                      text={product.numReviews + ' reviews'}\n                    />\n                  </a>\n                </li>\n                <li>\n                  Price: <b>${product.price}</b>\n                </li>\n                <li>\n                  Description:\n                  <div>{product.description}</div>\n                </li>\n              </ul>\n            </div>\n            <div className=\"details-action\">\n              <ul>\n                <li>Price: {product.price}</li>\n                <li>\n                  Status:{' '}\n                  {product.countInStock > 0 ? 'In Stock' : 'Unavailable.'}\n                </li>\n                <li>\n                  Qty:{' '}\n                  <select\n                    value={qty}\n                    onChange={(e) => {\n                      setQty(e.target.value);\n                    }}\n                  >\n                    {[...Array(product.countInStock).keys()].map((x) => (\n                      <option key={x + 1} value={x + 1}>\n                        {x + 1}\n                      </option>\n                    ))}\n                  </select>\n                </li>\n                <li>\n                  {product.countInStock > 0 && (\n                    <button\n                      onClick={handleAddToCart}\n                      className=\"button primary\"\n                    >\n                      Add to Cart\n                    </button>\n                  )}\n                </li>\n              </ul>\n            </div>\n          </div>\n          <div className=\"content-margined\">\n            <h2>Reviews</h2>\n            {!product.reviews.length && <div>There is no review</div>}\n            <ul className=\"review\" id=\"reviews\">\n              {product.reviews.map((review) => (\n                <li key={review._id}>\n                  <div>{review.name}</div>\n                  <div>\n                    <Rating value={review.rating}></Rating>\n                  </div>\n                  <div>{review.createdAt.substring(0, 10)}</div>\n                  <div>{review.comment}</div>\n                </li>\n              ))}\n              <li>\n                <h3>Write a customer review</h3>\n                {userInfo ? (\n                  <form onSubmit={submitHandler}>\n                    <ul className=\"form-container\">\n                      <li>\n                        <label htmlFor=\"rating\">Rating</label>\n                        <select\n                          name=\"rating\"\n                          id=\"rating\"\n                          value={rating}\n                          onChange={(e) => setRating(e.target.value)}\n                        >\n                          <option value=\"1\">1- Poor</option>\n                          <option value=\"2\">2- Fair</option>\n                          <option value=\"3\">3- Good</option>\n                          <option value=\"4\">4- Very Good</option>\n                          <option value=\"5\">5- Excelent</option>\n                        </select>\n                      </li>\n                      <li>\n                        <label htmlFor=\"comment\">Comment</label>\n                        <textarea\n                          name=\"comment\"\n                          value={comment}\n                          onChange={(e) => setComment(e.target.value)}\n                        ></textarea>\n                      </li>\n                      <li>\n                        <button type=\"submit\" className=\"button primary\">\n                          Submit\n                        </button>\n                      </li>\n                    </ul>\n                  </form>\n                ) : (\n                  <div>\n                    Please <Link to=\"/signin\">Sign-in</Link> to write a review.\n                  </div>\n                )}\n              </li>\n            </ul>\n          </div>\n        </>\n      )}\n    </div>\n  );\n}\nexport default ProductScreen;\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import React,{useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import{Link}from'react-router-dom';import CheckoutSteps from'../components/CheckoutSteps';import{createOrder}from'../actions/orderActions';function PlaceOrderScreen(props){var cart=useSelector(function(state){return state.cart;});var orderCreate=useSelector(function(state){return state.orderCreate;});var loading=orderCreate.loading,success=orderCreate.success,error=orderCreate.error,order=orderCreate.order;var cartItems=cart.cartItems,shipping=cart.shipping,payment=cart.payment;if(!shipping.address){props.history.push(\"/shipping\");}else if(!payment.paymentMethod){props.history.push(\"/payment\");}var itemsPrice=cartItems.reduce(function(a,c){return a+c.price*c.qty;},0);var shippingPrice=itemsPrice>100?0:10;var taxPrice=0.15*itemsPrice;var totalPrice=itemsPrice+shippingPrice+taxPrice;var dispatch=useDispatch();var placeOrderHandler=function placeOrderHandler(){// create an order\ndispatch(createOrder({orderItems:cartItems,shipping:shipping,payment:payment,itemsPrice:itemsPrice,shippingPrice:shippingPrice,taxPrice:taxPrice,totalPrice:totalPrice}));};useEffect(function(){if(success){props.history.push(\"/order/\"+order._id);}},[success]);return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(CheckoutSteps,{step1:true,step2:true,step3:true,step4:true}),/*#__PURE__*/React.createElement(\"div\",{className:\"placeorder\"},/*#__PURE__*/React.createElement(\"div\",{className:\"placeorder-info\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h3\",null,\"Shipping\"),/*#__PURE__*/React.createElement(\"div\",null,cart.shipping.address,\", \",cart.shipping.city,\",\",cart.shipping.postalCode,\", \",cart.shipping.country,\",\")),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h3\",null,\"Payment\"),/*#__PURE__*/React.createElement(\"div\",null,\"Payment Method: \",cart.payment.paymentMethod)),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"ul\",{className:\"cart-list-container\"},/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"h3\",null,\"Shopping Cart\"),/*#__PURE__*/React.createElement(\"div\",null,\"Price\")),cartItems.length===0?/*#__PURE__*/React.createElement(\"div\",null,\"Cart is empty\"):cartItems.map(function(item){return/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"cart-image\"},/*#__PURE__*/React.createElement(\"img\",{src:item.image,alt:\"product\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"cart-name\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Link,{to:\"/product/\"+item.product},item.name)),/*#__PURE__*/React.createElement(\"div\",null,\"Qty: \",item.qty)),/*#__PURE__*/React.createElement(\"div\",{className:\"cart-price\"},\"$\",item.price));})))),/*#__PURE__*/React.createElement(\"div\",{className:\"placeorder-action\"},/*#__PURE__*/React.createElement(\"ul\",null,/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"button\",{className:\"button primary full-width\",onClick:placeOrderHandler},\"Place Order\")),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"h3\",null,\"Order Summary\")),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"div\",null,\"Items\"),/*#__PURE__*/React.createElement(\"div\",null,\"$\",itemsPrice)),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"div\",null,\"Shipping\"),/*#__PURE__*/React.createElement(\"div\",null,\"$\",shippingPrice)),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"div\",null,\"Tax\"),/*#__PURE__*/React.createElement(\"div\",null,\"$\",taxPrice)),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"div\",null,\"Order Total\"),/*#__PURE__*/React.createElement(\"div\",null,\"$\",totalPrice))))));}export default PlaceOrderScreen;","map":{"version":3,"sources":["/Users/Me/Desktop/ReactProjects/ecomm/luxeshop/frontend/src/screens/PlaceOrderScreen.js"],"names":["React","useEffect","useDispatch","useSelector","Link","CheckoutSteps","createOrder","PlaceOrderScreen","props","cart","state","orderCreate","loading","success","error","order","cartItems","shipping","payment","address","history","push","paymentMethod","itemsPrice","reduce","a","c","price","qty","shippingPrice","taxPrice","totalPrice","dispatch","placeOrderHandler","orderItems","_id","city","postalCode","country","length","map","item","image","product","name"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport CheckoutSteps from '../components/CheckoutSteps';\nimport { createOrder } from '../actions/orderActions';\nfunction PlaceOrderScreen(props) {\n\n  const cart = useSelector(state => state.cart);\n  const orderCreate = useSelector(state => state.orderCreate);\n  const { loading, success, error, order } = orderCreate;\n\n  const { cartItems, shipping, payment } = cart;\n  if (!shipping.address) {\n    props.history.push(\"/shipping\");\n  } else if (!payment.paymentMethod) {\n    props.history.push(\"/payment\");\n  }\n  const itemsPrice = cartItems.reduce((a, c) => a + c.price * c.qty, 0);\n  const shippingPrice = itemsPrice > 100 ? 0 : 10;\n  const taxPrice = 0.15 * itemsPrice;\n  const totalPrice = itemsPrice + shippingPrice + taxPrice;\n\n  const dispatch = useDispatch();\n\n  const placeOrderHandler = () => {\n    // create an order\n    dispatch(createOrder({\n      orderItems: cartItems, shipping, payment, itemsPrice, shippingPrice,\n      taxPrice, totalPrice\n    }));\n  }\n  useEffect(() => {\n    if (success) {\n      props.history.push(\"/order/\" + order._id);\n    }\n\n  }, [success]);\n\n  return <div>\n    <CheckoutSteps step1 step2 step3 step4 ></CheckoutSteps>\n    <div className=\"placeorder\">\n      <div className=\"placeorder-info\">\n        <div>\n          <h3>\n            Shipping\n          </h3>\n          <div>\n            {cart.shipping.address}, {cart.shipping.city},\n          {cart.shipping.postalCode}, {cart.shipping.country},\n          </div>\n        </div>\n        <div>\n          <h3>Payment</h3>\n          <div>\n            Payment Method: {cart.payment.paymentMethod}\n          </div>\n        </div>\n        <div>\n          <ul className=\"cart-list-container\">\n            <li>\n              <h3>\n                Shopping Cart\n          </h3>\n              <div>\n                Price\n          </div>\n            </li>\n            {\n              cartItems.length === 0 ?\n                <div>\n                  Cart is empty\n          </div>\n                :\n                cartItems.map(item =>\n                  <li>\n                    <div className=\"cart-image\">\n                      <img src={item.image} alt=\"product\" />\n                    </div>\n                    <div className=\"cart-name\">\n                      <div>\n                        <Link to={\"/product/\" + item.product}>\n                          {item.name}\n                        </Link>\n\n                      </div>\n                      <div>\n                        Qty: {item.qty}\n                      </div>\n                    </div>\n                    <div className=\"cart-price\">\n                      ${item.price}\n                    </div>\n                  </li>\n                )\n            }\n          </ul>\n        </div>\n\n      \n      </div>\n      <div className=\"placeorder-action\">\n        <ul>\n          <li>\n            <button className=\"button primary full-width\" onClick={placeOrderHandler} >Place Order</button>\n          </li>\n          <li>\n            <h3>Order Summary</h3>\n          </li>\n          <li>\n            <div>Items</div>\n            <div>${itemsPrice}</div>\n          </li>\n          <li>\n            <div>Shipping</div>\n            <div>${shippingPrice}</div>\n          </li>\n          <li>\n            <div>Tax</div>\n            <div>${taxPrice}</div>\n          </li>\n          <li>\n            <div>Order Total</div>\n            <div>${totalPrice}</div>\n          </li>\n        </ul>\n\n\n\n      </div>\n\n    </div>\n  </div>\n\n}\n\nexport default PlaceOrderScreen;"]},"metadata":{},"sourceType":"module"}